<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 倫理審驗中心</title>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        .nav-link {
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background-color 0.2s, color 0.2s;
            color: #333;
            font-weight: 500;
        }
        .nav-link:hover {
            background-color: #e0e7ff;
            color: #4f46e5;
        }
        .active-tab {
            background-color: #4f46e5;
            color: white;
            font-weight: 600;
        }
        .active-tab:hover {
            background-color: #4338ca;
            color: white;
        }
        .content-section {
            min-height: 80vh;
            display: none;
        }
        /* 避免在表格中換行，保持資料庫結構的整潔 */
        .no-wrap {
            white-space: nowrap;
        }
        .tag {
            display: inline-block;
            padding: 2px 8px;
            margin: 2px 4px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .srai-phase-card {
            border-left-width: 4px;
            transition: all 0.3s ease;
        }
        .srai-phase-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        /* Custom input for aesthetics */
        .form-input {
            margin-top: 4px;
            display: block;
            width: 100%;
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #d1d5db; /* border-gray-300 */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            padding: 8px 12px;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        .form-input:focus {
            border-color: #4f46e5; /* indigo-600 */
            outline: 0;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2); /* ring-indigo-500 */
        }
        /* Landing Page Hero Pattern */
        .hero-bg {
            background-image: radial-gradient(#4f46e5 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .math-code {
            background-color: #f3f4f6; /* bg-gray-100 */
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
            display: block;
            margin-top: 4px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Header and Navigation -->
    <header class="bg-white shadow-lg rounded-xl p-4 mb-8 sticky top-0 z-10">
        <div class="max-w-7xl mx-auto flex flex-col lg:flex-row justify-between items-center gap-4">
            <h1 class="text-3xl font-extrabold text-gray-800 no-wrap cursor-pointer" onclick="showPage('landing')">
                AI 倫理審驗中心 
            </h1>
            <nav class="flex flex-wrap justify-center gap-2 text-sm md:text-base">
                <a class="nav-link" href="#" data-page="landing">首頁</a>
                <a class="nav-link" href="#" data-page="ethics">AI 倫理</a>
                <a class="nav-link" href="#" data-page="process">審驗流程</a>
                <a class="nav-link" href="#" data-page="application">審查申請</a>
                <a class="nav-link" href="#" data-page="risk-db">風險資料庫</a>
                <a class="nav-link" href="#" data-page="law-db">法規資料庫</a>
                <a class="nav-link" href="#" data-page="fairness-check">公平性檢定</a>
            </nav>
        </div>
    </header>

    <!-- Content Area -->
    <main class="max-w-7xl mx-auto bg-white p-6 md:p-10 rounded-xl shadow-2xl">

        <!-- 0. 首頁 (Landing Page) - 保持 index (2).html 原樣 -->
        <section id="landing" class="content-section" style="display: block;">
            <!-- Hero Section -->
            <div class="bg-gradient-to-r from-indigo-600 to-blue-500 rounded-3xl p-10 md:p-20 text-left text-white shadow-2xl mb-16 relative overflow-hidden">
                <div class="absolute inset-0 hero-bg opacity-10"></div>
                <div class="relative z-10">
                    <h2 class="text-4xl md:text-6xl font-extrabold mb-6 tracking-tight">推動負責任 AI，<br>成就永續智慧未來。</h2>
                    <button onclick="window.showPage('application')" class="bg-white text-indigo-600 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-50 hover:scale-105 transition transform duration-200 text-lg">
                        立即申請審查
                    </button>
                </div>
            </div>

            <!-- Features Grid -->
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <!-- Feature 1 -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-lg hover:shadow-xl transition duration-300 flex flex-col items-center text-center group">
                    <div class="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:bg-indigo-600 group-hover:text-white transition-colors duration-300">
                        ⚖️
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">專業審驗</h3>
                    <p class="text-gray-600 leading-relaxed">
                        依據國際標準，為您的 AI 專案提供公正、深入的倫理評估報告。
                </div>

                <!-- Feature 2 -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-lg hover:shadow-xl transition duration-300 flex flex-col items-center text-center group">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:bg-red-500 group-hover:text-white transition-colors duration-300">
                        🚨
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">風險洞察</h3>
                    <p class="text-gray-600 leading-relaxed">
                        存取最新的 AI 風險案例資料庫，預測並減輕潛在的社會與技術危害。
                </div>

                <!-- Feature 3 -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-lg hover:shadow-xl transition duration-300 flex flex-col items-center text-center group">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:bg-green-600 group-hover:text-white transition-colors duration-300">
                        📜
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">法規遵循</h3>
                    <p class="text-gray-600 leading-relaxed">
                        追蹤全球 AI 法規動態，提供最即時的法規遵循建議與資料。
                </div>
            </div>
        </section>

        <!-- 1. AI 倫理 (SRAI Model) - 保持 index (2).html 原樣 -->
        <section id="ethics" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 倫理審驗核心：SRAI 模型框架</h2>
            
            <p class="text-gray-700 text-lg mb-6">
                本中心採用社會責任人工智慧 (Socially Responsible AI, SRAI) 模型作為 AI 倫理審核心驗架構。
            </p>

            <!-- SRAI Objectives (Top) -->
            <div class="mb-10 bg-gradient-to-r from-gray-50 to-white p-6 rounded-xl border border-gray-200 shadow-sm">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">SRAI 核心目標</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div class="p-4 bg-white rounded-lg shadow-md border-t-4 border-orange-500 transform hover:-translate-y-1 transition">
                        <div class="text-3xl mb-2">⚙️</div>
                        <div class="font-bold text-orange-700 text-lg">系統穩健與準確<br><span class="text-sm font-normal text-gray-500">(Be Functional)</span></div>
                    </div>
                    <div class="p-4 bg-white rounded-lg shadow-md border-t-4 border-red-500 transform hover:-translate-y-1 transition">
                        <div class="text-3xl mb-2">📜</div>
                        <div class="font-bold text-red-700 text-lg">符合法規與人權<br><span class="text-sm font-normal text-gray-500">(Be Lawful)</span></div>
                    </div>
                    <div class="p-4 bg-white rounded-lg shadow-md border-t-4 border-blue-500 transform hover:-translate-y-1 transition">
                        <div class="text-3xl mb-2">⚖️</div>
                        <div class="font-bold text-blue-700 text-lg">公平、無歧視、透明<br><span class="text-sm font-normal text-gray-500">(Be Ethical)</span></div>
                    </div>
                    <div class="p-4 bg-white rounded-lg shadow-md border-t-4 border-green-500 transform hover:-translate-y-1 transition">
                        <div class="text-3xl mb-2">🌍</div>
                        <div class="font-bold text-green-700 text-lg">環境與資源永續<br><span class="text-sm font-normal text-gray-500">(Be Sustainable)</span></div>
                    </div>
                </div>
            </div>

            <!-- SRAI Governance Structure -->
            <div class="mb-12">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">SRAI 治理架構</h3>
                <div class="grid md:grid-cols-4 gap-4">
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg text-center shadow-sm">
                        <div class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-2 font-bold">1</div>
                        <div class="font-bold text-indigo-900 text-lg mb-2">利害關係人</div>
                        <div class="text-sm text-gray-600 space-y-1">
                            <div class="font-semibold text-indigo-500">主要</div>
                            <div>管理者、員工、客戶</div>
                            <div class="font-semibold text-indigo-500 mt-1">次要</div>
                            <div>社區、環境、政府</div>
                        </div>
                    </div>
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg text-center shadow-sm">
                        <div class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-2 font-bold">2</div>
                        <div class="font-bold text-indigo-900 text-lg mb-2">核心目標</div>
                        <div class="text-sm text-gray-600">
                            <ul class="space-y-1">
                                <li>經濟效益</li>
                                <li>法律合法</li>
                                <li>倫理價值</li>
                                <li>社會公益</li>
                                <li>環境永續</li>
                            </ul>
                        </div>
                    </div>
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg text-center shadow-sm">
                        <div class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-2 font-bold">3</div>
                        <div class="font-bold text-indigo-900 text-lg mb-2">風險成因</div>
                        <div class="text-sm text-gray-600 space-y-2">
                            <div><span class="font-semibold">資料階段</span><br>偏見、隱私、錯誤</div>
                            <div><span class="font-semibold">建模階段</span><br>黑箱、誤差、偏誤</div>
                            <div><span class="font-semibold">決策階段</span><br>濫用、因果誤判</div>
                        </div>
                    </div>
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg text-center shadow-sm">
                        <div class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-2 font-bold">4</div>
                        <div class="font-bold text-indigo-900 text-lg mb-2">治理手段</div>
                        <div class="text-sm text-gray-600 space-y-2">
                            <div><span class="font-semibold text-yellow-600">技術面</span><br>XAI, 隱私計算, 偏見檢測</div>
                            <div><span class="font-semibold text-yellow-600">非技術面</span><br>法規, 教育, 治理機制</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="space-y-8">
                <p class="text-gray-600 text-lg">依據上述架構，本中心將 AI 生命週期劃分為三個關鍵審查模組，確保從數據源頭到社會影響的全面合法且符合社會倫理價值及規範。</p>
                <!-- SRAI Modules Detail -->
                <div class="grid lg:grid-cols-3 gap-6">
                    <!-- Module 1 -->
                    <div class="srai-phase-card bg-blue-50 border-blue-500 p-6 rounded-lg">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">1</div>
                            <h3 class="text-xl font-bold text-blue-800">模組一：隱私與資料治理</h3>
                        </div>
                        <div class="text-sm font-semibold text-blue-600 mb-2 uppercase tracking-wide">Data Phase (資料階段)</div>
                        <p class="text-gray-700 mb-4">關注數據收集與處理的合法性、代表性與安全性，即「前處理 (Pre-processing)」。</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2 bg-white p-4 rounded-md shadow-sm">
                            <li><strong>資料可得性與代表性：</strong>數據是否涵蓋多元群體？</li>
                            <li><strong>資料偏誤與錯誤資訊：</strong>來源是否存在歷史偏見？</li>
                            <li><strong>資料隱私 (Data Privacy)：</strong>是否取得知情同意？</li>
                            <li><strong>資料安全 (Data Security)：</strong>儲存與傳輸是否加密？</li>
                        </ul>
                    </div>
                    <!-- Module 2 -->
                    <div class="srai-phase-card bg-indigo-50 border-indigo-500 p-6 rounded-lg">
                        <div class="flex items-center mb-4">
                            <div class="bg-indigo-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">2</div>
                            <h3 class="text-xl font-bold text-indigo-800">模組二：透明性與可解釋性</h3>
                        </div>
                        <div class="text-sm font-semibold text-indigo-600 mb-2 uppercase tracking-wide">Modeling Phase (建模階段)</div>
                        <p class="text-gray-700 mb-4">關注演算法的設計邏輯與黑箱問題，即「中處理 (In-processing)」。</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2 bg-white p-4 rounded-md shadow-sm">
                            <li><strong>測量誤差：</strong>變數定義是否準確？</li>
                            <li><strong>演算法偏誤 (Algorithmic Bias)：</strong>模型是否放大歧視？</li>
                            <li><strong>黑箱 AI 問題：</strong>決策邏輯是否可被人類理解 (XAI)？</li>
                            <li><strong>模型校準：</strong>參數設定是否合理？</li>
                        </ul>
                    </div>
                    <!-- Module 3 -->
                    <div class="srai-phase-card bg-purple-50 border-purple-500 p-6 rounded-lg">
                        <div class="flex items-center mb-4">
                            <div class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">3</div>
                            <h3 class="text-xl font-bold text-purple-800">模組三：結果公平性與社會影響</h3>
                        </div>
                        <div class="text-sm font-semibold text-purple-600 mb-2 uppercase tracking-wide">App. & Implication (應用與影響)</div>
                        <p class="text-gray-700 mb-4">關注決策產出後的實際衝擊與責任歸屬，即「後處理 (Post-processing)」。</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2 bg-white p-4 rounded-md shadow-sm">
                            <li><strong>相關 vs 因果：</strong>避免將統計相關誤認為因果關係。</li>
                            <li><strong>人類能動性 (Human Agency)：</strong>是否有「人」在迴路中監督？</li>
                            <li><strong>惡意 AI 使用：：</strong>防範深偽 (Deepfake) 與詐騙。</li>
                            <li><strong>成效評估：：：</strong>對經濟、社會與環境的長期影響。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. AI 倫理審驗流程 - 保持 index (2).html 原樣 -->
        <section id="process" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 倫理審驗流程標準作業程序</h2>

            <div class="space-y-8">
                 <p class="text-gray-600 text-lg">本中心依據 SRAI 模型的生命週期概念，設計了五階段的嚴謹審驗流程，確保從初始申請到後續監督的完整治理。</p>

                <!-- Flowchart Container -->
                <div class="relative">
                    <!-- Connecting Line (Desktop) -->
                    <div class="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-10 transform -translate-y-1/2"></div>
                    
                    <div class="grid md:grid-cols-5 gap-4">
                        <!-- Stage 1 -->
                        <div class="bg-white border-2 border-green-500 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-green-50 transition" onclick="showProcessDetail(1)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-500 text-white text-xs px-2 py-1 rounded-full">STEP 1</div>
                            <div class="font-bold text-green-800 text-lg mb-2">初始申請</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 應用範疇說明</div>
                                <div>• 訓練資料概述</div>
                                <div>• 風險自評問卷</div>
                            </div>
                        </div>

                        <!-- Stage 2 -->
                        <div class="bg-white border-2 border-yellow-500 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-yellow-50 transition" onclick="showProcessDetail(2)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full">STEP 2</div>
                            <div class="font-bold text-yellow-800 text-lg mb-2">風險分級</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 對照風險資料庫</div>
                                <div>• 判定：低/中/高</div>
                                <div>• 決定審查深度</div>
                            </div>
                        </div>

                        <!-- Stage 3 -->
                        <div class="bg-white border-2 border-blue-600 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-blue-50 transition transform scale-105 ring-2 ring-blue-200" onclick="showProcessDetail(3)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full">CORE</div>
                            <div class="font-bold text-blue-800 text-lg mb-2">多面向審查</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 前處理 (資料)</div>
                                <div>• 中處理 (模型)</div>
                                <div>• 後處理 (結果)</div>
                            </div>
                        </div>

                        <!-- Stage 4 -->
                        <div class="bg-white border-2 border-purple-500 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-purple-50 transition" onclick="showProcessDetail(4)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-purple-500 text-white text-xs px-2 py-1 rounded-full">STEP 4</div>
                            <div class="font-bold text-purple-800 text-lg mb-2">結論與回饋</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 評估通過</div>
                                <div>• 限期改善</div>
                                <div>• 不建議使用</div>
                            </div>
                        </div>

                        <!-- Stage 5 -->
                        <div class="bg-white border-2 border-red-500 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-red-50 transition" onclick="showProcessDetail(5)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">STEP 5</div>
                            <div class="font-bold text-red-800 text-lg mb-2">後設監督</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 定期追蹤報告</div>
                                <div>• 異常事件通報</div>
                                <div>• 群眾回饋機制</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Process Description -->
                <div id="process-details" class="mt-8 bg-gray-50 p-6 rounded-xl border-t-2 border-gray-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">審查階段詳解 (SRAI 模組應用)</h3>
                    <div class="space-y-6">
                        <div class="border-l-4 border-blue-600 pl-4">
                            <h4 class="font-bold text-blue-800">核心階段：多面向審查 (Multi-faceted Review)</h4>
                            <p class="text-sm text-gray-600 mb-2">此階段對應 SRAI 模型的三大模組，針對高風險系統進行深度檢驗：</p>
                            <div class="grid md:grid-cols-3 gap-4 mt-3">
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="font-bold text-sm mb-1">1. 前處理 (Pre-processing)</div>
                                    <div class="text-xs text-gray-500">對應：隱私與資料治理</div>
                                    <ul class="text-xs list-disc list-inside mt-1">
                                        <li>隱私影響評估 (PIA)</li>
                                        <li>資料偏誤檢測 (Bias Detection)</li>
                                        <li>群體代表性矩陣</li>
                                    </ul>
                                </div>
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="font-bold text-sm mb-1">2. 中處理 (In-processing)</div>
                                    <div class="text-xs text-gray-500">對應：透明性與可解釋性</div>
                                    <ul class="text-xs list-disc list-inside mt-1">
                                        <li>模型透明度文件</li>
                                        <li>可解釋 AI 技術 (SHAP, LIME)</li>
                                        <li>演算法偏見偵測</li>
                                    </ul>
                                </div>
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="font-bold text-sm mb-1">3. 後處理 (Post-processing)</div>
                                    <div class="text-xs text-gray-500">對應：結果公平性與影響</div>
                                    <ul class="text-xs list-disc list-inside mt-1">
                                        <li>Fairness Metrics (DIR, EOD)</li>
                                        <li>使用者體驗測試</li>
                                        <li>法規合法審查</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-bold text-gray-700">風險分級參考標準</h4>
                                <ul class="text-sm text-gray-600 list-disc list-inside">
                                    <li><strong>低風險：</strong>簡化審查，主要進行適法性檢核。</li>
                                    <li><strong>中風險：</strong>標準審查，需提交 Robustness Report。</li>
                                    <li><strong>高風險：</strong>深度審查，需通過完整三階段模組檢驗。</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-700">改善與監督策略</h4>
                                <ul class="text-sm text-gray-600 list-disc list-inside">
                                    <li><strong>改善策略：</strong>資料遮蔽、特徵轉換、模型參數校準。</li>
                                    <li><strong>公眾監督：：</strong>建立「AI倫理評估公開資料庫」與通報平台。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. 審查申請 - 使用 index.html 的設計 (Grid 佈局) -->
        <section id="application" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">審查申請</h2>
            
            <div class="grid lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                    <h3 class="text-2xl font-bold mb-6 text-indigo-700">線上申請表單</h3>
                    <p class="text-red-600 font-semibold mb-4 bg-red-50 p-3 rounded">注意：請務必詳實填寫，此資料將用於風險分級判斷。</p>
                    <form onsubmit="event.preventDefault(); alert('申請已提交！中心將於 3 個工作天內依據您的風險自評進行分級與流程啟動。'); window.showPage('landing');">
                        <div class="mb-4">
                            <label for="applicantName" class="block text-sm font-medium text-gray-700 mb-2">申請單位名稱</label>
                            <input type="text" id="applicantName" required class="form-input" placeholder="請輸入單位全稱">
                        </div>
                        <div class="mb-4">
                            <label for="projectName" class="block text-sm font-medium text-gray-700 mb-2">AI 項目名稱</label>
                            <input type="text" id="projectName" required class="form-input" placeholder="請輸入 AI 系統或專案名稱">
                        </div>
                        <div class="mb-6">
                            <label for="projectDesc" class="block text-sm font-medium text-gray-700 mb-2">應用領域說明 (請參照審查範圍，如：教育、高齡照護)</label>
                            <textarea id="projectDesc" rows="4" required class="form-input" placeholder="請輸入應用領域"></textarea>
                        </div>
                        <div class="mb-6">
                            <label for="riskLevel" class="block text-sm font-medium text-gray-700 mb-2">專案預估風險等級 (依據您的風險自評問卷結果選填)</label>
                            <select id="riskLevel" class="form-input">
                                <option>低風險 (簡化審查)</option>
                                <option>中風險 (標準審查)</option>
                                <option>高風險 (深度審查)</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="contactEmail" class="block text-sm font-medium text-gray-700 mb-2">聯絡電子郵件</label>
                            <input type="email" id="contactEmail" required class="form-input" placeholder="example@email.com">
                        </div>
                        
                        <div class="mb-6 border p-4 rounded-lg bg-gray-50">
                            <p class="font-semibold text-gray-800 mb-2">應繳交文件 (初始申請階段)</p>
                            <ul class="list-disc list-inside text-sm text-gray-600">
                                <li>AI 系統應用範疇說明 (目標對象、使用情境)</li>
                                <li>訓練資料概述 (來源、規模、處理方式)</li>
                                <li>AI 風險自我評估問卷 (必填)</li>
                            </ul>
                        </div>

                        <button type="submit" class="w-full bg-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-indigo-700 transition transform hover:-translate-y-0.5 shadow-lg">
                            提交審查申請
                        </button>
                    </form>
                </div>

                <div class="space-y-8">
                    <div class="bg-indigo-50 p-6 rounded-2xl shadow-md border-l-4 border-indigo-600 space-y-4">
                        <h3 class="text-xl font-bold text-indigo-800">審查資源下載</h3>
                        <p class="text-gray-700">下載倫理自評問卷與文件準備範本，加速您的申請流程。</p>
                        <div class="space-y-2">
                            <a href="#" class="block text-indigo-600 hover:text-indigo-800 font-medium flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                                [PDF] AI 風險自我評估問卷
                            </a>
                            <a href="#" class="block text-indigo-600 hover:text-indigo-800 font-medium flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-2 2zm0 0l5 5m-5-5h8M8 8H3"></path></svg>
                                [DOCX] 技術文件說明範本
                            </a>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-3">審核進度查詢</h3>
                        <p class="text-gray-700 text-sm mb-4">輸入您的申請編號追蹤狀態。</p>
                        <div class="flex">
                            <input type="text" placeholder="輸入編號..." class="w-2/3 px-3 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:border-indigo-500">
                            <button class="w-1/3 bg-indigo-500 text-white rounded-r-lg hover:bg-indigo-600 font-medium" onclick="alert('查詢功能模擬：目前狀態為「階段三：多面向審查 - 模型透明性/解釋性審核中」。')">查詢</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. AI 風險資料庫 - 內容更新為 index.html 的結構 -->
        <section id="risk-db" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 風險資料庫：高風險應用案例</h2>
            <div class="space-y-6">
                <p class="text-gray-600 text-lg">本資料庫聚焦於對「脆弱族群 (中小學生與高齡者)」 具潛在高風險的應用場景，模擬 MIT AIR 結構提供詳細風險分類。</p>
                <div class="flex flex-col sm:flex-row gap-4 mb-6 p-4 bg-gray-100 rounded-xl shadow-inner">
                    <input type="text" id="risk-search" onkeyup="filterRiskData()" placeholder="按情境、領域、風險類別或危害類型搜尋..." class="w-full sm:w-2/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition">
                    <button onclick="filterRiskData()" class="w-full sm:w-1/3 bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-indigo-700 transition">搜尋</button>
                </div>
                <p id="risk-result-count" class="text-sm text-gray-500 mb-4"></p>
                
                <div class="overflow-x-auto rounded-lg shadow-md border border-gray-200">
                    <table id="risk-db-table" class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-indigo-100">
                            <tr>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">案例編號</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">事件/標題</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">領域</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">發布日期</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">核心風險類別</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">危害類型</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">嚴重性</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">操作</th>
                            </tr>
                        </thead>
                        <tbody id="risk-data-body" class="bg-white divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 5. AI 法規資料庫 - 內容更新為 index.html 的結構 -->
        <section id="law-db" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 法規資料庫：國際監管框架比較</h2>
            <div class="space-y-6">
                <p class="text-gray-600 text-lg">彙整國際與國內最新的 AI 相關法規、指導原則與政策文件，並比較其監管模式。</p>
                <div class="flex flex-col sm:flex-row gap-4 mb-6 p-4 bg-gray-100 rounded-xl shadow-inner">
                    <input type="text" id="law-search" onkeyup="filterLawData()" placeholder="按法規名稱、範圍或核心重點搜尋..." class="w-full sm:w-2/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition">
                    <button onclick="filterLawData()" class="w-full sm:w-1/3 bg-green-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-green-700 transition">搜尋</button>
                </div>
                <p id="law-result-count" class="text-sm text-gray-500 mb-4"></p>

                <div class="overflow-x-auto rounded-lg shadow-md border border-gray-200">
                    <table id="law-db-table" class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-indigo-100">
                            <tr>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">編號</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">法規名稱/文件</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">發布日期</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">適用範圍</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">核心重點/模型</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">文件操作</th>
                            </tr>
                        </thead>
                        <tbody id="law-data-body" class="bg-white divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 6. AI 公平性檢定 - 保持 index (2).html 原樣 -->
        <section id="fairness-check" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 公平性檢定：量化分析工具</h2>
            
            <!-- 公平性指標定義 (已置頂) -->
            <div class="mb-8 bg-gray-50 p-6 rounded-xl border border-gray-200">
                <h3 class="text-xl font-bold text-gray-800 mb-4">公平性核心指標定義 (Fairness Metrics)</h3>
                <div class="grid md:grid-cols-2 gap-6 text-sm">
                    <!-- 1. 差異影響比率 (DIR) -->
                    <div>
                        <h4 class="font-bold text-indigo-700">1. 差異影響比率 (Disparate Impact Ratio, DIR)</h4>
                        <p class="text-gray-600 mb-1">衡量弱勢群體相對於優勢群體獲得有利結果的機率比值。若 $DIR < 0.8$ 則通常被視為存在不利影響。</p>
                        <div class="math-code">DIR = P(Ŷ=1 | A = 弱勢群體) / P(Ŷ=1 | A = 優勢群體)</div>
                        <p class="text-xs text-gray-500 mt-1">標準：$DIR \ge 0.8$ (80% 法則)。$Y\_pred$ 為模型預測值。</p>
                    </div>

                    <!-- 2. 人口統計對等距離 (DPD) -->
                    <div>
                        <h4 class="font-bold text-indigo-700">2. 人口統計對等距離 (Demographic Parity Distance, DPD)</h4>
                        <p class="text-gray-600 mb-1">衡量各群體獲得正向預測機率與整體平均機率的偏差總和。值越小，表示群體間差異越小。</p>
                        <div class="math-code">DPD = &sum;<sub>i</sub> [ | P(Ŷ = 1 | A = a<sub>i</sub>) - P(Ŷ = 1) | ]</div>
                        <p class="text-xs text-gray-500 mt-1">其中 $A$ 為受保護屬性，$a_i$ 為不同群體的屬性值。</p>
                    </div>
                    
                    <!-- 3. 機會均等距離 (EOD) -->
                    <div>
                        <h4 class="font-bold text-indigo-700">3. 機會均等距離 (Equalized Odds Distance, EOD)</h4>
                        <p class="text-gray-600 mb-1">同時考量真實正向率 (True Positive Rate, TPR) 和錯誤正向率 (False Positive Rate, FPR) 在群體間的差異。</p>
                        <div class="math-code">EOD = &sum;<sub>i</sub> [ |TPR<sub>a<sub>i</sub></sub> - TPR| + |FPR<sub>a<sub>i</sub></sub> - FPR| ]</div>
                        <p class="text-xs text-gray-500 mt-1">TPR: 真正率, FPR: 偽正率。值越小表示機會越均等。</p>
                    </div>

                    <!-- 4. 統計對等 (連續數值) -->
                    <div>
                        <h4 class="font-bold text-indigo-700">4. 統計對等 (Statistical Parity for Continuous Outcomes)</h4>
                        <p class="text-gray-600 mb-1">適用於連續數值預測的模型，要求不同群體的預測結果在期望值和變異數上均相等。</p>
                        <div class="math-code">E[Ŷ | A = a] = E[Ŷ | A = a']</div>
                        <div class="math-code">Var[Ŷ | A = a] = Var[Ŷ | A = a']</div>
                        <p class="text-xs text-gray-500 mt-1">$E[]$ 為期望值（平均值），$Var[]$ 為變異數（分散度）。</p>
                    </div>
                </div>
                <p class="text-gray-600 mt-4 text-base font-bold">請使用以下工具，對 AI 模型在特定參數下的公平性進行模擬檢測。</p>
            </div>

            <div class="space-y-8">
                <!-- 步驟 1 -->
                <div class="bg-indigo-50 p-6 rounded-xl shadow border border-indigo-200">
                    <h3 class="text-lg font-semibold text-indigo-700 mb-4">步驟 1: 數據準備</h3>
                    <button onclick="handleFileUpload()" class="bg-indigo-600 text-white font-bold py-2 px-4 rounded shadow hover:bg-indigo-700 transition">上傳訓練數據 (模擬)</button>
                    <p id="upload-status" class="mt-2 text-sm text-green-600 hidden">✅ 數據已模擬載入成功。</p>
                </div>

                <!-- 步驟 2 -->
                <div class="bg-yellow-50 p-6 rounded-xl shadow border border-yellow-200">
                    <h3 class="text-lg font-semibold text-yellow-700 mb-4">步驟 2: 定義參數</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div><label class="text-sm block">有利結果</label><select class="w-full p-2 border rounded"><option>1 (推甄書審通過)</option><option>0 (推甄書不通過)</option></select></div>
                        <div><label class="text-sm block">弱勢群體</label><select id="unprivileged-group" class="w-full p-2 border rounded"><option value="female">女</option><option>少數族裔</option></select></div>
                        <div><label class="text-sm block">優勢群體</label><select id="privileged-group" class="w-full p-2 border rounded"><option value="male">男</option><option>白人</option></select></div>
                    </div>
                </div>

                <!-- 步驟 3 -->
                <div class="bg-red-50 p-6 rounded-xl shadow border border-red-200">
                    <h3 class="text-lg font-semibold text-red-700 mb-4">步驟 3: 執行檢定</h3>
                    <button onclick="runFairnessCheck()" class="bg-red-600 text-white font-bold py-2 px-4 rounded shadow hover:bg-red-700 transition">執行檢定</button>
                </div>

                <!-- 結果 -->
                <div id="fairness-results" class="hidden space-y-6 mt-8">
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-2">檢定結果</h3>
                    
                    <!-- 數據分佈圖 -->
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2">數據分佈模擬</h4>
                        <div class="w-full bg-gray-300 rounded-full h-6 overflow-hidden flex">
                            <div class="bg-green-500 h-full flex items-center justify-center text-xs text-white" style="width: 70%">優勢群體 70%</div>
                            <div class="bg-red-500 h-full flex items-center justify-center text-xs text-white" style="width: 30%">弱勢 30%</div>
                        </div>
                    </div>

                    <!-- DIR 儀表板 -->
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2 text-blue-800">差異影響比率 (DIR) 儀表板</h4>
                        <div class="relative pt-6 pb-2">
                            <div class="h-4 bg-gray-200 rounded-full overflow-hidden">
                                <div id="dir-bar" class="h-full bg-red-500 transition-all duration-1000" style="width: 0%"></div>
                            </div>
                            <!-- Target Line 0.8 -->
                            <div class="absolute top-0 bottom-0 w-0.5 bg-black h-full" style="left: 80%"></div>
                            <div class="absolute -top-1 text-xs font-bold" style="left: 78%">0.8 (及格)</div>
                            <div class="flex justify-between text-xs mt-1">
                                <span>0</span>
                                <span id="dir-value-text" class="font-bold text-red-600">0.00</span>
                                <span>1.0</span>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">若紅條未超過黑線 (0.8)，表示存在潛在不公平。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer (Updated to rich design) -->
        <footer class="bg-gray-800 text-white mt-12 py-12 rounded-t-3xl">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <h4 class="text-xl font-bold mb-4">AI 倫理審驗中心</h4>
                    <p class="text-gray-400 text-sm mb-4 pr-4">致力於推動負責任的 AI 發展，提供專業的倫理審查與風險評估服務，確保技術應用符合國際標準與社會價值，成就可信賴的智慧未來。</p>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">快速連結</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#" onclick="showPage('landing')" class="hover:text-white transition">首頁</a></li>
                        <li><a href="#" onclick="showPage('process')" class="hover:text-white transition">審驗流程</a></li>
                        <li><a href="#" onclick="showPage('risk-db')" class="hover:text-white transition">風險資料庫</a></li>
                        <li><a href="#" onclick="showPage('law-db')" class="hover:text-white transition">法規資料庫</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">聯絡我們</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li class="flex items-start">
                            <span class="mr-2">📍</span>
                            <span>台北市和平東路一段129號</span>
                        </li>
                        <li class="flex items-center">
                            <span class="mr-2">✉️</span>
                            <span>contact@ntnu.edu.tw</span>
                        </li>
                        <li class="flex items-center">
                            <span class="mr-2">📞</span>
                            <span>(02) 7749-1111</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-12 pt-8 border-t border-gray-700 text-center text-sm text-gray-500">
                <p>&copy; 2025 AI 倫理審驗中心. All rights reserved.</p>
            </div>
        </footer>

    </main>

    <!-- JavaScript -->
    <script>
        // --- 1. Risk Database Content (From index.html) ---
        const riskData = [
            { case_id: 'Edu-001', incident_title: '個人化學習系統監控', domain: '教育/兒童', date: '2025-06-15', risk_category: '偏見與公平性、隱私侵犯', harm_type: '學習機會不均、心理壓力', mitigation_focus: '演算法公平性、數據收集合法性', severity: '極高' },
            { case_id: 'HR-002', incident_title: '升學志願推薦系統偏差', domain: '人力資源/教育', date: '2024-11-20', risk_category: '分類偏誤、決策不透明', harm_type: '限制多元發展、分類不公', mitigation_focus: '決策可解釋性、多元選項保留', severity: '高' },
            { case_id: 'Care-003', incident_title: '高齡AI健康監測誤判', domain: '健康照護/高齡', date: '2025-01-10', risk_category: '資料安全、建議準確性', harm_type: '敏感資料外洩、誤導致健康風險', mitigation_focus: '個資保護、系統準確性評估', severity: '極高' },
            { case_id: 'Fin-004', incident_title: '智能投資顧問透明度不足', domain: '金融服務/銀髮', date: '2024-08-05', risk_category: '透明度不足、詐騙防護', harm_type: '經濟損失、投資誤導', mitigation_focus: '詐騙偵測準確性、介面可及性', severity: '高' },
            { case_id: 'Gov-005', incident_title: '福利資格AI審核不公', domain: '公共服務/社會福利', date: '2025-03-22', risk_category: '模型偏誤、歧視結果', harm_type: '人權侵犯、不公平決策', mitigation_focus: '決策透明與人工覆核、偏誤監控', severity: '極高' },
        ];

        // --- 2. Law Database Content (From index.html) ---
        const lawData = [
            { id: 101, name: '歐盟人工智慧法案 (EU AI Act)', date: '2024-05-21', scope: '歐盟（法律約束力）', context: '採風險分級（高/有限/最低），全球首個全面性AI法案，保障基本人權及安全。' },
            { id: 102, name: '美國 AI 權利法案藍圖', date: '2023-01-01', scope: '美國聯邦（指導原則）', context: '非約束性原則，強調非歧視性及問責制，鼓勵企業自願遵循最佳實踐。' },
            { id: 103, name: '中國 生成式AI管理暫行辦法', date: '2023-08-15', scope: '中國大陸（生成式AI）', context: '針對演算法推薦、深度合成技術等提供具體且強制性的法規，側重內容審核與國家控制。' },
            { id: 104, name: '越南 數位技術產業法 (DTI Law)', date: '2025-06-14', scope: '越南（AI開發與部署）', context: '採高風險/高影響分級，明確規定開發者與部署者的責任，旨在追趕東協技術領先。' },
            { id: 105, name: '印度 數位個人資料保護法 (DPDP Act)', date: '2023-08-11', scope: '印度（資料隱私與保護）', context: '國家級資料保護框架，影響所有使用個人資料的AI系統，特別是人才招募領域。' },
            { id: 106, name: '歐洲理事會 AI框架公約', date: '2024-05-17', scope: '國際條約（法律約束力）', context: '第一個具法律約束力的國際AI公約，確保AI發展與使用符合人權、民主和法治原則。' },
            { id: 107, name: 'G7 廣島AI進程', date: '2023-10-30', scope: '國際（自願準則）', context: '推動國際間自願性的 AI 行為準則，鼓勵輕觸式監管及產業最佳實踐，以平衡創新與安全。' },
            { id: 108, name: '台灣 人工智慧基本法草案', date: '2024-07-15', scope: '台灣（草案）', context: '旨在促進AI研發與應用，建立友善環境。著作權、個資等細節需回歸現行法規。' },
            { id: 109, name: '日本 著作權法（AI學習例外）', date: '2019-01-01', scope: '日本（著作權法）', context: '擴大AI利用既有著作之自由空間（合理使用），為資訊分析提供便利，但仍有不當損害利益之限制。' },
            { id: 110, name: '歐盟 AI Act - 監管沙盒機制', date: '2024-05-21', scope: '歐盟（創新測試）', context: '允許在受控環境下，對特定AI系統暫時性放寬GDPR限制，以利技術研發和測試。' },
            { id: 111, name: '歐盟 AI Act - 情緒AI（EAI）禁用', date: '2024-05-21', scope: '歐盟（倫理限制）', context: '明文禁止EAI在教育及工作場域應用，因其缺乏科學基礎且可能造成歧視。' },
            { id: 112, name: 'AI 生成發明與專利改革', date: '2023-12-22', scope: '國際專利法制探討', context: '探討AI發明人資格（DABUS 爭議），多國駁回。需改革專利法制以防PHOSITA標準升高。' },
        ];

        // Navigation
        window.showPage = function(pageId) {
            document.querySelectorAll('.content-section').forEach(s => s.style.display = 'none');
            const targetElement = document.getElementById(pageId); 
            if (targetElement) {
                targetElement.style.display = 'block';
            }
            document.querySelectorAll('.nav-link').forEach(l => {
                l.classList.toggle('active-tab', l.getAttribute('data-page') === pageId);
            });
            // Re-render tables on tab switch to ensure they show correctly
            if(pageId === 'risk-db') filterRiskData();
            if(pageId === 'law-db') filterLawData();
        }

        // --- Render Functions (Updated for new data structure) ---
        function renderRiskTable(data) {
            const tbody = document.getElementById('risk-data-body');
            tbody.innerHTML = '';
            data.forEach(item => {
                // Severity styling
                let severityColor = 'bg-green-100 text-green-800';
                if (item.severity === '高') severityColor = 'bg-yellow-100 text-yellow-800';
                if (item.severity === '極高') severityColor = 'bg-red-100 text-red-800';

                // Category chips
                const riskCategories = item.risk_category.split('、').map((cat, index) => {
                    const baseColor = index % 2 === 0 ? 'bg-blue-100 text-blue-800' : 'bg-gray-200 text-gray-800';
                    return `<span class="px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full ${baseColor} mr-1">${cat}</span>`;
                }).join('');

                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm font-medium text-gray-900">${item.case_id}</td>
                    <td class="px-4 py-3 text-sm text-gray-700 font-medium">${item.incident_title}</td>
                    <td class="px-4 py-3 text-sm text-gray-700">${item.domain}</td>
                    <td class="px-4 py-3 text-sm text-gray-700">${item.date}</td>
                    <td class="px-4 py-3 text-sm text-gray-700">${riskCategories}</td>
                    <td class="px-4 py-3 text-sm text-gray-700">${item.harm_type}</td>
                    <td class="px-4 py-3 text-sm text-gray-700">
                        <span class="px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full ${severityColor}">
                            ${item.severity}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm text-blue-600 cursor-pointer hover:underline" onclick="alert('緩解重點：${item.mitigation_focus}')">查看詳情</td>
                `;
                tbody.appendChild(row);
            });
            document.getElementById('risk-result-count').innerText = `找到 ${data.length} 筆資料。`;
        }

        function renderLawTable(data) {
            const tbody = document.getElementById('law-data-body');
            tbody.innerHTML = '';
            data.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm font-medium text-gray-900">${item.id}</td>
                    <td class="px-4 py-3 text-sm text-gray-700 font-medium">${item.name}</td>
                    <td class="px-4 py-3 text-sm text-gray-700">${item.date}</td>
                    <td class="px-4 py-3 text-sm text-gray-700">${item.scope}</td>
                    <td class="px-4 py-3 text-sm text-gray-700 max-w-xs truncate" title="${item.context}">${item.context}</td>
                    <td class="px-4 py-3 text-sm text-green-600 cursor-pointer hover:underline">下載文件</td>
                `;
                tbody.appendChild(row);
            });
            document.getElementById('law-result-count').innerText = `找到 ${data.length} 筆資料。`;
        }

        window.filterRiskData = function() {
            const val = document.getElementById('risk-search').value.toLowerCase();
            const filtered = riskData.filter(item => {
                const fields = [item.incident_title, item.domain, item.risk_category, item.harm_type];
                return fields.some(field => field.toLowerCase().includes(val));
            });
            renderRiskTable(filtered);
        }

        window.filterLawData = function() {
            const val = document.getElementById('law-search').value.toLowerCase();
            const filtered = lawData.filter(item => {
                const fields = [item.name, item.scope, item.context];
                return fields.some(field => field.toLowerCase().includes(val));
            });
            renderLawTable(filtered);
        }

        // Fairness Check Logic (Original from index (2).html)
        window.handleFileUpload = function() {
            alert('模擬數據載入成功！');
            document.getElementById('upload-status').classList.remove('hidden');
        }

        window.runFairnessCheck = function() {
            const container = document.getElementById('fairness-results');
            container.classList.remove('hidden');
            
            // Mock Calculation for DIR (0.65)
            const dirValue = 0.65;
            const percentage = dirValue * 100;
            
            // Update Bar
            const bar = document.getElementById('dir-bar');
            const text = document.getElementById('dir-value-text');
            
            // Reset for animation effect
            bar.style.width = '0%';
            setTimeout(() => {
                bar.style.width = percentage + '%';
                text.innerText = dirValue.toFixed(2);
                if(dirValue < 0.8) {
                    bar.classList.remove('bg-green-500');
                    bar.classList.add('bg-red-500');
                    text.innerHTML += " (不公平)";
                } else {
                    bar.classList.remove('bg-red-500');
                    bar.classList.add('bg-green-500');
                }
            }, 100);

            alert('檢定完成！請查看下方結果儀表板。');
        }

        // Init
        document.addEventListener('DOMContentLoaded', function() {
            window.showPage('landing'); // Default page is Landing
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = e.target.getAttribute('data-page');
                    window.showPage(page);
                });
            });
            
            // Initial load of DB data
            filterRiskData();
            filterLawData();
        });
    </script>
</body>
</html>

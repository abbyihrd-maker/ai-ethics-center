<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 倫理審驗中心</title>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        .nav-link {
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background-color 0.2s, color 0.2s;
            color: #333;
            font-weight: 500;
        }
        .nav-link:hover {
            background-color: #e0e7ff;
            color: #4f46e5;
        }
        .active-tab {
            background-color: #4f46e5;
            color: white;
            font-weight: 600;
        }
        .active-tab:hover {
            background-color: #4338ca;
            color: white;
        }
        .content-section {
            min-height: 80vh;
            display: none;
        }
        /* 避免在表格中換行，保持資料庫結構的整潔 */
        .no-wrap {
            white-space: nowrap;
        }
        .tag {
            display: inline-block;
            padding: 2px 8px;
            margin: 2px 4px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .srai-phase-card {
            border-left-width: 4px;
            transition: all 0.3s ease;
        }
        .srai-phase-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        /* Custom input for aesthetics */
        .form-input {
            margin-top: 4px;
            display: block;
            width: 100%;
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #d1d5db; /* border-gray-300 */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            padding: 8px 12px;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        .form-input:focus {
            border-color: #4f46e5; /* indigo-600 */
            outline: 0;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2); /* ring-indigo-500 */
        }
        /* Landing Page Hero Pattern */
        .hero-bg {
            background-image: radial-gradient(#4f46e5 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .math-code {
            background-color: #f3f4f6; /* bg-gray-100 */
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
            display: block;
            margin-top: 4px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Header and Navigation -->
    <header class="bg-white shadow-lg rounded-xl p-4 mb-8 sticky top-0 z-10">
        <div class="max-w-7xl mx-auto flex flex-col lg:flex-row justify-between items-center gap-4">
            <h1 class="text-3xl font-extrabold text-gray-800 no-wrap cursor-pointer" onclick="showPage('landing')">
                AI 倫理審驗中心 
            </h1>
            <nav class="flex flex-wrap justify-center gap-2 text-sm md:text-base">
                <a class="nav-link" href="#" data-page="landing">首頁</a>
                <a class="nav-link" href="#" data-page="ethics">AI 倫理</a>
                <a class="nav-link" href="#" data-page="process">審驗流程</a>
                <a class="nav-link" href="#" data-page="application">審查申請</a>
                <a class="nav-link" href="#" data-page="risk-db">風險資料庫</a>
                <a class="nav-link" href="#" data-page="law-db">法規資料庫</a>
                <a class="nav-link" href="#" data-page="fairness-check">公平性檢定</a>
            </nav>
        </div>
    </header>

    <!-- Content Area -->
    <main class="max-w-7xl mx-auto bg-white p-6 md:p-10 rounded-xl shadow-2xl">

        <!-- 0. 首頁 (Landing Page) -->
        <section id="landing" class="content-section" style="display: block;">
            <!-- Hero Section -->
            <div class="bg-gradient-to-r from-indigo-600 to-blue-500 rounded-3xl p-10 md:p-20 text-center text-white shadow-2xl mb-16 relative overflow-hidden">
                <div class="absolute inset-0 hero-bg opacity-10"></div>
                <div class="relative z-10">
                    <h2 class="text-4xl md:text-6xl font-extrabold mb-6 tracking-tight">推動負責任 AI，<br>成就永續未來，</h2>
                    <p class="text-lg md:text-xl text-indigo-100 mb-10 max-w-2xl mx-auto"></p>
                    <button onclick="window.showPage('application')" class="bg-white text-indigo-600 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-50 hover:scale-105 transition transform duration-200 text-lg">
                        立即申請審查
                    </button>
                </div>
            </div>

            <!-- Features Grid -->
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <!-- Feature 1 -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-lg hover:shadow-xl transition duration-300 flex flex-col items-center text-center group">
                    <div class="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:bg-indigo-600 group-hover:text-white transition-colors duration-300">
                        ⚖️
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">專業審驗</h3>
                    <p class="text-gray-600 leading-relaxed">
                        依據國際標準，為您的 AI 專案提供公正、深入的倫理評估報告。
                    </p>
                </div>

                <!-- Feature 2 -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-lg hover:shadow-xl transition duration-300 flex flex-col items-center text-center group">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:bg-red-500 group-hover:text-white transition-colors duration-300">
                        🚨
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">風險洞察</h3>
                    <p class="text-gray-600 leading-relaxed">
                        存取最新的 AI 風險案例資料庫，預測並減輕潛在的社會與技術危害。
                    </p>
                </div>

                <!-- Feature 3 -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-lg hover:shadow-xl transition duration-300 flex flex-col items-center text-center group">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-3xl mb-6 group-hover:bg-green-600 group-hover:text-white transition-colors duration-300">
                        📜
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">法規遵循</h3>
                    <p class="text-gray-600 leading-relaxed">
                        追蹤全球 AI 法規動態，提供最即時的法規遵循建議與資料。
                    </p>
                </div>
            </div>
        </section>

        <!-- 1. AI 倫理 (SRAI Model) -->
        <section id="ethics" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 倫理審驗核心：SRAI 模型框架</h2>
            
            <!-- SRAI Model Core Statement (No Background) -->
            <p class="text-gray-700 text-lg mb-6">
                本中心採用社會責任人工智慧 (Socially Responsible AI, SRAI) 模型作為 AI 倫理審核心驗架構。
            </p>

            <!-- SRAI Objectives (Top) -->
            <div class="mb-10 bg-gradient-to-r from-gray-50 to-white p-6 rounded-xl border border-gray-200 shadow-sm">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">SRAI 核心目標</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    
                    <!-- 1. 系統穩健與準確 (Be Functional) -->
                    <div class="p-4 bg-white rounded-lg shadow-md border-t-4 border-orange-500 transform hover:-translate-y-1 transition">
                        <div class="text-3xl mb-2">⚙️</div>
                        <div class="font-bold text-orange-700 text-lg">系統穩健與準確<br><span class="text-sm font-normal text-gray-500">(Be Functional)</span></div>
                    </div>
                    
                    <!-- 2. 符合法規與人權 (Be Lawful) -->
                    <div class="p-4 bg-white rounded-lg shadow-md border-t-4 border-red-500 transform hover:-translate-y-1 transition">
                        <div class="text-3xl mb-2">📜</div>
                        <div class="font-bold text-red-700 text-lg">符合法規與人權<br><span class="text-sm font-normal text-gray-500">(Be Lawful)</span></div>
                    </div>
                    
                    <!-- 3. 公平、無歧視、透明 (Be Ethical) -->
                    <div class="p-4 bg-white rounded-lg shadow-md border-t-4 border-blue-500 transform hover:-translate-y-1 transition">
                        <div class="text-3xl mb-2">⚖️</div>
                        <div class="font-bold text-blue-700 text-lg">公平、無歧視、透明<br><span class="text-sm font-normal text-gray-500">(Be Ethical)</span></div>
                    </div>

                    <!-- 4. 環境與資源永續 (Be Sustainable) -->
                    <div class="p-4 bg-white rounded-lg shadow-md border-t-4 border-green-500 transform hover:-translate-y-1 transition">
                        <div class="text-3xl mb-2">🌍</div>
                        <div class="font-bold text-green-700 text-lg">環境與資源永續<br><span class="text-sm font-normal text-gray-500">(Be Sustainable)</span></div>
                    </div>
                </div>
            </div>

            <!-- SRAI Governance Structure (Flat/Parallel Layout) -->
            <div class="mb-12">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">SRAI 治理架構</h3>
                <div class="grid md:grid-cols-4 gap-4">
                    <!-- Layer 1: Stakeholders -->
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg text-center shadow-sm">
                        <div class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-2 font-bold">1</div>
                        <div class="font-bold text-indigo-900 text-lg mb-2">利害關係人</div>
                        <div class="text-sm text-gray-600 space-y-1">
                            <div class="font-semibold text-indigo-500">主要</div>
                            <div>管理者、員工、客戶</div>
                            <div class="font-semibold text-indigo-500 mt-1">次要</div>
                            <div>社區、環境、政府</div>
                        </div>
                    </div>
                    
                    <!-- Layer 2: Objectives -->
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg text-center shadow-sm">
                        <div class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-2 font-bold">2</div>
                        <div class="font-bold text-indigo-900 text-lg mb-2">核心目標</div>
                        <div class="text-sm text-gray-600">
                            <ul class="space-y-1">
                                <li>經濟效益</li>
                                <li>法律合法</li>
                                <li>倫理價值</li>
                                <li>社會公益</li>
                                <li>環境永續</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Layer 3: Causes -->
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg text-center shadow-sm">
                        <div class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-2 font-bold">3</div>
                        <div class="font-bold text-indigo-900 text-lg mb-2">風險成因</div>
                        <div class="text-sm text-gray-600 space-y-2">
                            <div>
                                <span class="font-semibold">資料階段</span><br>偏見、隱私、錯誤
                            </div>
                            <div>
                                <span class="font-semibold">建模階段</span><br>黑箱、誤差、偏誤
                            </div>
                            <div>
                                <span class="font-semibold">決策階段</span><br>濫用、因果誤判
                            </div>
                        </div>
                    </div>

                    <!-- Layer 4: Means -->
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg text-center shadow-sm">
                        <div class="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-2 font-bold">4</div>
                        <div class="font-bold text-indigo-900 text-lg mb-2">治理手段</div>
                        <div class="text-sm text-gray-600 space-y-2">
                            <div>
                                <span class="font-semibold text-yellow-600">技術面</span><br>
                                XAI, 隱私計算, 偏見檢測
                            </div>
                            <div>
                                <span class="font-semibold text-yellow-600">非技術面</span><br>
                                法規, 教育, 治理機制
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="space-y-8">
                <p class="text-gray-600 text-lg">
                    依據上述架構，本中心將 AI 生命週期劃分為三個關鍵審查模組，確保從數據源頭到社會影響的全面合法且符合社會倫理價值及規範。
                </p>

                <!-- SRAI Modules Detail -->
                <div class="grid lg:grid-cols-3 gap-6">
                    
                    <!-- Module 1: Data Phase -->
                    <div class="srai-phase-card bg-blue-50 border-blue-500 p-6 rounded-lg">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">1</div>
                            <h3 class="text-xl font-bold text-blue-800">模組一：隱私與資料治理</h3>
                        </div>
                        <div class="text-sm font-semibold text-blue-600 mb-2 uppercase tracking-wide">Data Phase (資料階段)</div>
                        <p class="text-gray-700 mb-4">關注數據收集與處理的合法性、代表性與安全性，即「前處理 (Pre-processing)」。</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2 bg-white p-4 rounded-md shadow-sm">
                            <li><strong>資料可得性與代表性：</strong>數據是否涵蓋多元群體？</li>
                            <li><strong>資料偏誤與錯誤資訊：</strong>來源是否存在歷史偏見？</li>
                            <li><strong>資料隱私 (Data Privacy)：</strong>是否取得知情同意？</li>
                            <li><strong>資料安全 (Data Security)：</strong>儲存與傳輸是否加密？</li>
                        </ul>
                    </div>

                    <!-- Module 2: Modeling Phase -->
                    <div class="srai-phase-card bg-indigo-50 border-indigo-500 p-6 rounded-lg">
                        <div class="flex items-center mb-4">
                            <div class="bg-indigo-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">2</div>
                            <h3 class="text-xl font-bold text-indigo-800">模組二：透明性與可解釋性</h3>
                        </div>
                        <div class="text-sm font-semibold text-indigo-600 mb-2 uppercase tracking-wide">Modeling Phase (建模階段)</div>
                        <p class="text-gray-700 mb-4">關注演算法的設計邏輯與黑箱問題，即「中處理 (In-processing)」。</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2 bg-white p-4 rounded-md shadow-sm">
                            <li><strong>測量誤差：</strong>變數定義是否準確？</li>
                            <li><strong>演算法偏誤 (Algorithmic Bias)：</strong>模型是否放大歧視？</li>
                            <li><strong>黑箱 AI 問題：</strong>決策邏輯是否可被人類理解 (XAI)？</li>
                            <li><strong>模型校準：</strong>參數設定是否合理？</li>
                        </ul>
                    </div>

                    <!-- Module 3: Application & Implication Phase -->
                    <div class="srai-phase-card bg-purple-50 border-purple-500 p-6 rounded-lg">
                        <div class="flex items-center mb-4">
                            <div class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">3</div>
                            <h3 class="text-xl font-bold text-purple-800">模組三：結果公平性與社會影響</h3>
                        </div>
                        <div class="text-sm font-semibold text-purple-600 mb-2 uppercase tracking-wide">App. & Implication (應用與影響)</div>
                        <p class="text-gray-700 mb-4">關注決策產出後的實際衝擊與責任歸屬，即「後處理 (Post-processing)」。</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2 bg-white p-4 rounded-md shadow-sm">
                            <li><strong>相關 vs 因果：</strong>避免將統計相關誤認為因果關係。</li>
                            <li><strong>人類能動性 (Human Agency)：</strong>是否有「人」在迴路中監督？</li>
                            <li><strong>惡意 AI 使用：</strong>防範深偽 (Deepfake) 與詐騙。</li>
                            <li><strong>成效評估：</strong>對經濟、社會與環境的長期影響。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. AI 倫理審驗流程 -->
        <section id="process" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 倫理審驗流程標準作業程序</h2>

            <div class="space-y-8">
                 <p class="text-gray-600 text-lg">本中心依據 SRAI 模型的生命週期概念，設計了五階段的嚴謹審驗流程，確保從初始申請到後續監督的完整治理。</p>

                <!-- Flowchart Container -->
                <div class="relative">
                    <!-- Connecting Line (Desktop) -->
                    <div class="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-10 transform -translate-y-1/2"></div>
                    
                    <div class="grid md:grid-cols-5 gap-4">
                        <!-- Stage 1 -->
                        <div class="bg-white border-2 border-green-500 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-green-50 transition" onclick="showProcessDetail(1)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-500 text-white text-xs px-2 py-1 rounded-full">STEP 1</div>
                            <div class="font-bold text-green-800 text-lg mb-2">初始申請</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 應用範疇說明</div>
                                <div>• 訓練資料概述</div>
                                <div>• 風險自評問卷</div>
                            </div>
                        </div>

                        <!-- Stage 2 -->
                        <div class="bg-white border-2 border-yellow-500 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-yellow-50 transition" onclick="showProcessDetail(2)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full">STEP 2</div>
                            <div class="font-bold text-yellow-800 text-lg mb-2">風險分級</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 對照風險資料庫</div>
                                <div>• 判定：低/中/高</div>
                                <div>• 決定審查深度</div>
                            </div>
                        </div>

                        <!-- Stage 3 -->
                        <div class="bg-white border-2 border-blue-600 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-blue-50 transition transform scale-105 ring-2 ring-blue-200" onclick="showProcessDetail(3)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full">CORE</div>
                            <div class="font-bold text-blue-800 text-lg mb-2">多面向審查</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 前處理 (資料)</div>
                                <div>• 中處理 (模型)</div>
                                <div>• 後處理 (結果)</div>
                            </div>
                        </div>

                        <!-- Stage 4 -->
                        <div class="bg-white border-2 border-purple-500 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-purple-50 transition" onclick="showProcessDetail(4)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-purple-500 text-white text-xs px-2 py-1 rounded-full">STEP 4</div>
                            <div class="font-bold text-purple-800 text-lg mb-2">結論與回饋</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 評估通過</div>
                                <div>• 限期改善</div>
                                <div>• 不建議使用</div>
                            </div>
                        </div>

                        <!-- Stage 5 -->
                        <div class="bg-white border-2 border-red-500 p-4 rounded-xl shadow-lg text-center relative group cursor-pointer hover:bg-red-50 transition" onclick="showProcessDetail(5)">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">STEP 5</div>
                            <div class="font-bold text-red-800 text-lg mb-2">後設監督</div>
                            <div class="text-xs text-gray-600 text-left space-y-1">
                                <div>• 定期追蹤報告</div>
                                <div>• 異常事件通報</div>
                                <div>• 群眾回饋機制</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Process Description -->
                <div id="process-details" class="mt-8 bg-gray-50 p-6 rounded-xl border-t-2 border-gray-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">審查階段詳解 (SRAI 模組應用)</h3>
                    
                    <div class="space-y-6">
                        <div class="border-l-4 border-blue-600 pl-4">
                            <h4 class="font-bold text-blue-800">核心階段：多面向審查 (Multi-faceted Review)</h4>
                            <p class="text-sm text-gray-600 mb-2">此階段對應 SRAI 模型的三大模組，針對高風險系統進行深度檢驗：</p>
                            <div class="grid md:grid-cols-3 gap-4 mt-3">
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="font-bold text-sm mb-1">1. 前處理 (Pre-processing)</div>
                                    <div class="text-xs text-gray-500">對應：隱私與資料治理</div>
                                    <ul class="text-xs list-disc list-inside mt-1">
                                        <li>隱私影響評估 (PIA)</li>
                                        <li>資料偏誤檢測 (Bias Detection)</li>
                                        <li>群體代表性矩陣</li>
                                    </ul>
                                </div>
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="font-bold text-sm mb-1">2. 中處理 (In-processing)</div>
                                    <div class="text-xs text-gray-500">對應：透明性與可解釋性</div>
                                    <ul class="text-xs list-disc list-inside mt-1">
                                        <li>模型透明度文件</li>
                                        <li>可解釋 AI 技術 (SHAP, LIME)</li>
                                        <li>演算法偏見偵測</li>
                                    </ul>
                                </div>
                                <div class="bg-white p-3 rounded shadow-sm">
                                    <div class="font-bold text-sm mb-1">3. 後處理 (Post-processing)</div>
                                    <div class="text-xs text-gray-500">對應：結果公平性與影響</div>
                                    <ul class="text-xs list-disc list-inside mt-1">
                                        <li>Fairness Metrics (DIR, EOD)</li>
                                        <li>使用者體驗測試</li>
                                        <li>法規合法審查</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-bold text-gray-700">風險分級參考標準</h4>
                                <ul class="text-sm text-gray-600 list-disc list-inside">
                                    <li><strong>低風險：</strong>簡化審查，主要進行適法性檢核。</li>
                                    <li><strong>中風險：</strong>標準審查，需提交 Robustness Report。</li>
                                    <li><strong>高風險：</strong>深度審查，需通過完整三階段模組檢驗。</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-700">改善與監督策略</h4>
                                <ul class="text-sm text-gray-600 list-disc list-inside">
                                    <li><strong>改善策略：</strong>資料遮蔽、特徵轉換、模型參數校準。</li>
                                    <li><strong>公眾監督：</strong>建立「AI倫理評估公開資料庫」與通報平台。</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. 審查申請 (Mock Form) -->
        <section id="application" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">審查申請</h2>

            <!-- Online Application Form -->
            <div class="space-y-6">
                <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 text-sm text-yellow-800 rounded-lg">
                    <p class="font-bold">注意：請務必詳實填寫，此資料將用於風險分級判斷。</p>
                </div>

                <form class="space-y-4 p-6 bg-white rounded-lg shadow-md border border-gray-200">
                    
                    <!-- 申請單位名稱 -->
                    <div>
                        <label for="applicant-unit" class="block text-sm font-medium text-gray-700">申請單位名稱</label>
                        <input type="text" id="applicant-unit" name="applicant-unit" required class="form-input" placeholder="請輸入單位全稱">
                    </div>
                    
                    <!-- AI 項目名稱 -->
                    <div>
                        <label for="ai-project-name" class="block text-sm font-medium text-gray-700">AI 項目名稱</label>
                        <input type="text" id="ai-project-name" name="ai-project-name" required class="form-input" placeholder="請輸入 AI 系統或專案名稱">
                    </div>
                    
                    <!-- 應用領域說明 -->
                    <div>
                        <label for="application-domain" class="block text-sm font-medium text-gray-700">應用領域說明 (請參照審查範圍，如：教育、高齡照護)</label>
                        <input type="text" id="application-domain" name="application-domain" required class="form-input" placeholder="請輸入應用領域">
                    </div>

                    <!-- 專案預估風險等級 -->
                    <div>
                        <label for="risk-level" class="block text-sm font-medium text-gray-700">專案預估風險等級 (依據您的風險自評問卷結果選填)</label>
                        <select id="risk-level" name="risk-level" required class="form-input">
                            <option value="low">低風險 (簡化審查)</option>
                            <option value="medium">中風險 (標準審查)</option>
                            <option value="high">高風險 (深度審查)</option>
                        </select>
                    </div>
                    
                    <!-- 聯絡電子郵件 -->
                    <div>
                        <label for="contact-email" class="block text-sm font-medium text-gray-700">聯絡電子郵件</label>
                        <input type="email" id="contact-email" name="contact-email" required class="form-input" placeholder="example@email.com">
                    </div>
                    
                    <!-- 應繳交文件 (初始申請階段) - Checkboxes -->
                    <div class="pt-2">
                        <h4 class="text-sm font-bold text-gray-700 mb-2">應繳交文件 (初始申請階段)</h4>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <input id="doc-scope" name="document-required" type="checkbox" checked disabled class="h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                <label for="doc-scope" class="ml-3 block text-sm text-gray-700">AI 系統應用範疇說明 (目標對象、使用情境)</label>
                            </div>
                            <div class="flex items-center">
                                <input id="doc-data" name="document-required" type="checkbox" checked disabled class="h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                <label for="doc-data" class="ml-3 block text-sm text-gray-700">訓練資料概述 (來源、規模、處理方式)</label>
                            </div>
                            <div class="flex items-center">
                                <input id="doc-risk" name="document-required" type="checkbox" checked disabled class="h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                <label for="doc-risk" class="ml-3 block text-sm text-gray-700">AI 風險自我評估問卷 (必填)</label>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-center pt-4">
                        <button type="submit" class="w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors">
                            提交審查申請
                        </button>
                    </div>
                </form>

                <!-- 審查資源下載 -->
                <div class="mt-8 p-6 bg-indigo-50 rounded-xl shadow-inner border border-indigo-200">
                    <h3 class="text-xl font-bold text-indigo-800 mb-3">審查資源下載</h3>
                    <p class="text-sm text-gray-700 mb-4">下載倫理自評問卷與文件準備範本，加速您的申請流程。</p>
                    <div class="space-y-2 text-sm font-medium">
                        <a href="#" onclick="alert('模擬下載：AI 風險自我評估問卷 PDF')" class="flex items-center text-blue-600 hover:text-blue-800 transition">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V17a2 2 0 01-2 2z"></path></svg>
                            [PDF] AI 風險自我評估問卷
                        </a>
                        <a href="#" onclick="alert('模擬下載：技術文件說明範本 DOCX')" class="flex items-center text-blue-600 hover:text-blue-800 transition">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-3-3v6M17 16l4 4M7 8l-4 4m0 0l4 4m-4-4h18"></path></svg>
                            [DOCX] 技術文件說明範本
                        </a>
                    </div>
                </div>

                <!-- 審核進度查詢 -->
                <div class="mt-8 p-6 bg-white rounded-xl shadow-md border border-gray-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">審核進度查詢</h3>
                    <p class="text-sm text-gray-600 mb-4">輸入您的申請編號追蹤狀態。</p>
                    <div class="flex space-x-3">
                        <input type="text" id="application-id-query" class="form-input flex-grow" placeholder="請輸入申請編號 (如: AIC2025001)">
                        <button type="button" onclick="alert('模擬查詢：正在查找申請編號 ' + document.getElementById('application-id-query').value)" class="py-2 px-6 bg-indigo-500 text-white font-medium rounded-md shadow hover:bg-indigo-600 transition-colors whitespace-nowrap">
                            查詢
                        </button>
                    </div>
                </div>

            </div>
        </section>

        <!-- 4. AI 風險資料庫 -->
        <section id="risk-db" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 風險資料庫：高風險應用案例</h2>
            <div class="space-y-6">
                <p class="text-gray-600 text-lg">本資料庫聚焦於對「脆弱族群 (中小學生與高齡者)」 具潛在高風險的應用場景，模擬 MIT AIR 結構提供詳細風險分類。</p>
                <input type="text" id="risk-search" onkeyup="filterRiskData()" placeholder="搜尋案例..." class="w-full p-2 border border-gray-300 rounded-lg shadow-sm">
                <div class="overflow-x-auto rounded-lg shadow-md border border-gray-200">
                    <table id="risk-db-table" class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-indigo-100">
                            <tr>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">案例編號</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">事件/標題</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">領域</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">發布日期</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">核心風險類別</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">危害類型</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">嚴重性</th>
                                <th class="px-4 py-3 text-left font-bold text-indigo-800 no-wrap">操作</th>
                            </tr>
                        </thead>
                        <tbody id="risk-data-body" class="bg-white divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 5. AI 法規資料庫 -->
        <section id="law-db" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 法規資料庫</h2>
            <div class="space-y-6">
                <p class="text-gray-600 text-lg">收錄國際主要經濟體及國內關於 AI 治理、隱私、智慧財產權與人權相關的法律規範。</p>
                <input type="text" id="law-search" onkeyup="filterLawData()" placeholder="搜尋法規..." class="w-full p-2 border border-gray-300 rounded-lg shadow-sm">
                <div class="overflow-x-auto rounded-lg shadow-md border border-gray-200">
                    <table id="law-db-table" class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-indigo-100">
                            <tr><th class="px-4 py-3 text-left font-bold text-indigo-800">地區</th><th class="px-4 py-3 text-left font-bold text-indigo-800">法規名稱</th><th class="px-4 py-3 text-left font-bold text-indigo-800">日期</th><th class="px-4 py-3 text-left font-bold text-indigo-800">核心重點</th><th class="px-4 py-3 text-left font-bold text-indigo-800">關鍵權益</th></tr>
                        </thead>
                        <tbody id="law-data-body" class="bg-white divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 6. AI 公平性檢定 -->
        <section id="fairness-check" class="content-section">
            <h2 class="text-4xl font-bold text-indigo-700 mb-6 border-b-4 border-indigo-200 pb-2">AI 公平性檢定：量化分析工具</h2>
            
            <!-- 公平性指標定義 (已置頂) -->
            <div class="mb-8 bg-gray-50 p-6 rounded-xl border border-gray-200">
                <h3 class="text-xl font-bold text-gray-800 mb-4">公平性核心指標定義 (Fairness Metrics)</h3>
                <div class="grid md:grid-cols-2 gap-6 text-sm">
                    <!-- 1. 差異影響比率 (DIR) -->
                    <div>
                        <h4 class="font-bold text-indigo-700">1. 差異影響比率 (Disparate Impact Ratio, DIR)</h4>
                        <p class="text-gray-600 mb-1">衡量弱勢群體相對於優勢群體獲得有利結果的機率比值。若 $DIR < 0.8$ 則通常被視為存在不利影響。</p>
                        <div class="math-code">DIR = P(Ŷ=1 | A = 弱勢群體) / P(Ŷ=1 | A = 優勢群體)</div>
                        <p class="text-xs text-gray-500 mt-1">標準：$DIR \ge 0.8$ (80% 法則)。$Y\_pred$ 為模型預測值。</p>
                    </div>

                    <!-- 2. 人口統計對等距離 (DPD) -->
                    <div>
                        <h4 class="font-bold text-indigo-700">2. 人口統計對等距離 (Demographic Parity Distance, DPD)</h4>
                        <p class="text-gray-600 mb-1">衡量各群體獲得正向預測機率與整體平均機率的偏差總和。值越小，表示群體間差異越小。</p>
                        <div class="math-code">DPD = $\Sigma_i$ [ | P(Ŷ = 1 | A = $a_i$) - P(Ŷ = 1) | ]</div>
                        <p class="text-xs text-gray-500 mt-1">其中 $A$ 為受保護屬性，$a_i$ 為不同群體的屬性值。</p>
                    </div>
                    
                    <!-- 3. 機會均等距離 (EOD) -->
                    <div>
                        <h4 class="font-bold text-indigo-700">3. 機會均等距離 (Equalized Odds Distance, EOD)</h4>
                        <p class="text-gray-600 mb-1">同時考量真實正向率 (True Positive Rate, TPR) 和錯誤正向率 (False Positive Rate, FPR) 在群體間的差異。</p>
                        <div class="math-code">EOD = $\Sigma_i$ [ |TPR$_{a_i}$ - TPR| + |FPR$_{a_i}$ - FPR| ]</div>
                        <p class="text-xs text-gray-500 mt-1">TPR: 真正率, FPR: 偽正率。值越小表示機會越均等。</p>
                    </div>

                    <!-- 4. 統計對等 (連續數值) -->
                    <div>
                        <h4 class="font-bold text-indigo-700">4. 統計對等 (Statistical Parity for Continuous Outcomes)</h4>
                        <p class="text-gray-600 mb-1">適用於連續數值預測的模型，要求不同群體的預測結果在期望值和變異數上均相等。</p>
                        <div class="math-code">E[Ŷ | A = a] = E[Ŷ | A = a']</div>
                        <div class="math-code">Var[Ŷ | A = a] = Var[Ŷ | A = a']</div>
                        <p class="text-xs text-gray-500 mt-1">$E[]$ 為期望值（平均值），$Var[]$ 為變異數（分散度）。</p>
                    </div>
                </div>
                <p class="text-gray-600 mt-4 text-base font-bold">請使用以下工具，對 AI 模型在特定參數下的公平性進行模擬檢測。</p>
            </div>

            <div class="space-y-8">
                <!-- 步驟 1 -->
                <div class="bg-indigo-50 p-6 rounded-xl shadow border border-indigo-200">
                    <h3 class="text-lg font-semibold text-indigo-700 mb-4">步驟 1: 數據準備</h3>
                    <button onclick="handleFileUpload()" class="bg-indigo-600 text-white font-bold py-2 px-4 rounded shadow hover:bg-indigo-700 transition">上傳訓練數據 (模擬)</button>
                    <p id="upload-status" class="mt-2 text-sm text-green-600 hidden">✅ 數據已模擬載入成功。</p>
                </div>

                <!-- 步驟 2 -->
                <div class="bg-yellow-50 p-6 rounded-xl shadow border border-yellow-200">
                    <h3 class="text-lg font-semibold text-yellow-700 mb-4">步驟 2: 定義參數</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div><label class="text-sm block">有利結果</label><select class="w-full p-2 border rounded"><option>1 (推甄書審通過)</option><option>0 (推甄書不通過)</option></select></div>
                        <div><label class="text-sm block">弱勢群體</label><select id="unprivileged-group" class="w-full p-2 border rounded"><option value="female">女</option><option>少數族裔</option></select></div>
                        <div><label class="text-sm block">優勢群體</label><select id="privileged-group" class="w-full p-2 border rounded"><option value="male">男</option><option>白人</option></select></div>
                    </div>
                </div>

                <!-- 步驟 3 -->
                <div class="bg-red-50 p-6 rounded-xl shadow border border-red-200">
                    <h3 class="text-lg font-semibold text-red-700 mb-4">步驟 3: 執行檢定</h3>
                    <button onclick="runFairnessCheck()" class="bg-red-600 text-white font-bold py-2 px-4 rounded shadow hover:bg-red-700 transition">執行檢定</button>
                </div>

                <!-- 結果 -->
                <div id="fairness-results" class="hidden space-y-6 mt-8">
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-2">檢定結果</h3>
                    
                    <!-- 數據分佈圖 -->
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2">數據分佈模擬</h4>
                        <div class="w-full bg-gray-300 rounded-full h-6 overflow-hidden flex">
                            <div class="bg-green-500 h-full flex items-center justify-center text-xs text-white" style="width: 70%">優勢群體 70%</div>
                            <div class="bg-red-500 h-full flex items-center justify-center text-xs text-white" style="width: 30%">弱勢 30%</div>
                        </div>
                    </div>

                    <!-- DIR 儀表板 -->
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2 text-blue-800">差異影響比率 (DIR) 儀表板</h4>
                        <div class="relative pt-6 pb-2">
                            <div class="h-4 bg-gray-200 rounded-full overflow-hidden">
                                <div id="dir-bar" class="h-full bg-red-500 transition-all duration-1000" style="width: 0%"></div>
                            </div>
                            <!-- Target Line 0.8 -->
                            <div class="absolute top-0 bottom-0 w-0.5 bg-black h-full" style="left: 80%"></div>
                            <div class="absolute -top-1 text-xs font-bold" style="left: 78%">0.8 (及格)</div>
                            <div class="flex justify-between text-xs mt-1">
                                <span>0</span>
                                <span id="dir-value-text" class="font-bold text-red-600">0.00</span>
                                <span>1.0</span>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">若紅條未超過黑線 (0.8)，表示存在潛在不公平。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="mt-12 text-center text-gray-500 text-sm border-t pt-6">
            <p>© 2025 AI 倫理審驗中心 | 台北市和平東路一段129號</p>
            <p>聯絡我們：contact@ntnu.edu.tw</p>
        </footer>

    </main>

    <!-- JavaScript -->
    <script>
        // Data
        const riskData = [
            {"case_id":"Edu-001","scenario":"個人化學習系統監控","domain":"教育/兒童","date":"2025-06-15","risk_type":"偏見與公平性","hazard_type":"隱私侵犯、學習機會不均、心理壓力","severity":"極高","operation":"查看詳情"},
            {"case_id":"HR-002","scenario":"升學志願推薦系統偏差","domain":"人力資源/教育","date":"2024-11-20","risk_type":"分類偏誤","hazard_type":"決策不透明、限制多元發展、分類不公","severity":"高","operation":"查看詳情"},
            {"case_id":"Care-003","scenario":"高齡AI健康監測誤判","domain":"健康照護/高齡","date":"2025-01-10","risk_type":"資料安全、建議準確性","hazard_type":"敏感資料外洩、誤導致健康風險","severity":"極高","operation":"查看詳情"},
            {"case_id":"Fin-004","scenario":"智能投資顧問透明度不足","domain":"金融服務/銀髮","date":"2024-08-05","risk_type":"透明度不足、詐騙防護","hazard_type":"經濟損失、投資誤導","severity":"高","operation":"查看詳情"},
            {"case_id":"Gov-005","scenario":"福利資格AI審核不公","domain":"公共服務/社會福利","date":"2025-03-22","risk_type":"模型偏誤、歧視結果","hazard_type":"人權侵犯、不公平決策","severity":"極高","operation":"查看詳情"}
        ];
        
        const lawData = [
            // 歐盟
            {"地區":"歐盟","法規名稱":"人工智慧法 (AI Act)","日期":"2024-05","核心重點":"風險分級監管框架","關鍵權益":"禁止不可接受風險AI (如社會評分)"},
            {"地區":"歐盟","法規名稱":"通用資料保護規則 (GDPR)","日期":"2018","核心重點":"資料主體權利、自動化決策","關鍵權益":"解釋權、拒絕自動化決策"},
            {"地區":"歐盟","法規名稱":"AI 責任指令 (草案)","日期":"2022","核心重點":"AI 損害賠償責任","關鍵權益":"減輕受害者舉證責任"},
            {"地區":"歐盟","法規名稱":"數位單一市場著作權指令","日期":"2019","核心重點":"文字與資料探勘 (TDM) 例外","關鍵權益":"權利人可保留權利 (Opt-out)"},
            
            // 美國
            {"地區":"美國","法規名稱":"AI 權利法案藍圖","日期":"2022","核心重點":"五大原則：安全、防歧視、隱私等","關鍵權益":"非約束性指導原則"},
            {"地區":"美國","法規名稱":"第 14110 號行政命令","日期":"2023-10","核心重點":"安全、可靠且值得信賴的 AI 開發","關鍵權益":"聯邦機構採購與使用規範"},
            {"地區":"美國","法規名稱":"紐約市地方法 144 號","日期":"2023-07","核心重點":"自動化就業決策工具 (AEDT)","關鍵權益":"強制偏見審計"},
            
            // 台灣
            {"地區":"台灣","法規名稱":"人工智慧基本法草案","日期":"2023 (草案)","核心重點":"產業發展與倫理並重","關鍵權益":"建立AI風險分級與問責機制"},
            {"地區":"台灣","法規名稱":"個人資料保護法","日期":"2015 (修)","核心重點":"個資蒐集、處理、利用","關鍵權益":"當事人同意權、更正權"},
            {"地區":"台灣","法規名稱":"行政院生成式 AI 參考指引","日期":"2023","核心重點":"公部門使用規範","關鍵權益":"機密保護、內容標示"},
            
            // 亞洲其他
            {"地區":"中國","法規名稱":"生成式 AI 服務管理暫行辦法","日期":"2023-08","核心重點":"內容安全、社會主義核心價值","關鍵權益":"演算法備案、訓練數據合法"},
            {"地區":"日本","法規名稱":"著作權法 (修正)","日期":"2018","核心重點":"放寬 AI 機器學習之著作利用","關鍵權益":"促進 AI 產業發展 (第 30-4 條)"},
            {"地區":"越南","法規名稱":"數位科技產業法 (DTI Law)","日期":"2025","核心重點":"風險分級：高風險與高影響","關鍵權益":"要求 AI 標示與揭露"},
            
            // 國際組織
            {"地區":"OECD","法規名稱":"AI 發展原則","日期":"2019","核心重點":"以人為本、包容性成長","關鍵權益":"國際政策協調基礎"},
            {"地區":"UNESCO","法規名稱":"AI 倫理建議書","日期":"2021","核心重點":"人權、尊嚴、環境永續","關鍵權益":"教育與文化多樣性保護"}
        ];

        // Navigation
        window.showPage = function(pageId) {
            document.querySelectorAll('.content-section').forEach(s => s.style.display = 'none');
            
            // Fix: target element ID should match the pageId exactly since the anchor data-page is set to it
            const targetElement = document.getElementById(pageId); 
            if (targetElement) {
                targetElement.style.display = 'block';
            } else {
                // Defensive check if target section is null
                console.error(`Section not found for pageId: ${pageId}`);
                return; 
            }

            document.querySelectorAll('.nav-link').forEach(l => {
                l.classList.toggle('active-tab', l.getAttribute('data-page') === pageId);
            });
        }

        // DB Render
        window.renderDatabase = function(data, tableId) {
            const tbody = document.querySelector(`#${tableId} tbody`);
            if (!tbody) return;
            tbody.innerHTML = '';
            
            // Check if the table is risk-db and has new columns
            const isRiskDb = tableId.includes('risk');
            const numColumns = isRiskDb ? 8 : 5; // Risk DB has 8 columns, Law DB has 5

            data.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                let htmlContent = '';
                if (isRiskDb) {
                    htmlContent = `
                        <td class="px-4 py-2 text-sm">${item.case_id}</td>
                        <td class="px-4 py-2 text-sm">${item.scenario}</td>
                        <td class="px-4 py-2 text-sm">${item.domain}</td>
                        <td class="px-4 py-2 text-sm">${item.date}</td>
                        <td class="px-4 py-2 text-sm text-red-600">${item.risk_type}</td>
                        <td class="px-4 py-2 text-sm">${item.hazard_type}</td>
                        <td class="px-4 py-2 text-sm font-bold text-red-700">${item.severity}</td>
                        <td class="px-4 py-2 text-sm"><button onclick="alert('模擬查看：${item.scenario} 的詳細資訊')" class="text-indigo-600 hover:text-indigo-900 font-medium">查看詳情</button></td>
                    `;
                } else {
                    htmlContent = `
                        <td class="px-4 py-2 text-sm font-bold">${item.地區}</td>
                        <td class="px-4 py-2 text-sm">${item.法規名稱}</td>
                        <td class="px-4 py-2 text-sm">${item.日期}</td>
                        <td class="px-4 py-2 text-sm">${item.核心重點}</td>
                        <td class="px-4 py-2 text-sm text-blue-600">${item.關鍵權益}</td>
                    `;
                }
                
                row.innerHTML = htmlContent;
                tbody.appendChild(row);
            });

            // Update search result count display (mock implementation)
            if (isRiskDb) {
                const countDisplay = document.getElementById('risk-search-count');
                if (countDisplay) {
                    countDisplay.innerText = `找到 ${data.length} 筆資料。`;
                }
            }
        }

        window.filterRiskData = function() {
            const val = document.getElementById('risk-search').value.toLowerCase();
            const filtered = riskData.filter(i => Object.values(i).join(' ').toLowerCase().includes(val));
            window.renderDatabase(filtered, 'risk-db-table');
        }
        window.filterLawData = function() {
            const val = document.getElementById('law-search').value.toLowerCase();
            const filtered = lawData.filter(i => Object.values(i).join(' ').toLowerCase().includes(val));
            window.renderDatabase(filtered, 'law-db-table');
        }

        // Fairness Check Logic
        window.handleFileUpload = function() {
            alert('模擬數據載入成功！');
            document.getElementById('upload-status').classList.remove('hidden');
        }

        window.runFairnessCheck = function() {
            const container = document.getElementById('fairness-results');
            container.classList.remove('hidden');
            
            // Mock Calculation for DIR (0.65)
            const dirValue = 0.65;
            const percentage = dirValue * 100;
            
            // Update Bar
            const bar = document.getElementById('dir-bar');
            const text = document.getElementById('dir-value-text');
            
            // Reset for animation effect
            bar.style.width = '0%';
            setTimeout(() => {
                bar.style.width = percentage + '%';
                text.innerText = dirValue.toFixed(2);
                if(dirValue < 0.8) {
                    bar.classList.remove('bg-green-500');
                    bar.classList.add('bg-red-500');
                    text.innerHTML += " (不公平)";
                } else {
                    bar.classList.remove('bg-red-500');
                    bar.classList.add('bg-green-500');
                }
            }, 100);

            alert('檢定完成！請查看下方結果儀表板。');
        }

        // Init
        document.addEventListener('DOMContentLoaded', function() {
            window.showPage('landing'); // Default page is now Landing
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = e.target.getAttribute('data-page');
                    window.showPage(page);
                    // Manually re-render the databases upon switch to ensure content is fresh
                    if(page === 'risk-db') window.renderDatabase(riskData, 'risk-db-table');
                    if(page === 'law-db') window.renderDatabase(lawData, 'law-db-table');
                });
            });
            
            // Initial load of DB data (important for search field updates)
            window.renderDatabase(riskData, 'risk-db-table');
            window.renderDatabase(lawData, 'law-db-table');
        });
    </script>
</body>
</html>
